(()=>{"use strict";class e{static getProjects(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static addToDo(t,o){const l=e.getProjects();if(!1===l.some((e=>e.proTitle===t.proTitle))||0===l.length)l.push(t),localStorage.setItem("projects",JSON.stringify(l));else for(let e=0;e<=l.length-1;e+=1)l[e].proTitle.to_i===t.proTitle.to_i&&(l[e].todos.push(o),localStorage.setItem("projects",JSON.stringify(l)));location.reload()}static removeToDo(t){const o=e.getProjects();o.forEach((e=>{e.todos.forEach(((o,l)=>{o.time===t&&e.todos.splice(l,1)}))})),localStorage.setItem("projects",JSON.stringify(o))}static updateToDo(t,o){const l=e.getProjects();l.forEach((e=>{e.proTitle.to_i===o.to_i&&e.todos.forEach(((o,l)=>{o.time.to_i===t.time.to_i&&(e.todos[l]=t)}))})),localStorage.setItem("projects",JSON.stringify(l)),location.reload()}static removePr(t){const o=e.getProjects();o.forEach(((e,l)=>{e.proTitle.to_i===t.to_i&&o.splice(l,1)})),localStorage.setItem("projects",JSON.stringify(o))}}class t{constructor(e){this.proTitle=e,this.todos=[]}}const o=t=>{const o=document.querySelector("#todo-form");o.id="update-form",o.lastElementChild.value="Update To Do",o.lastElementChild.addEventListener("click",(o=>{o.preventDefault();const l=document.querySelector("#title").value,i=document.querySelector("#description").value,r=document.querySelector("#due-date").value,c=document.querySelector("#priority").value,s=document.querySelector("#notes").value,n=document.querySelector("#project").value,a=document.querySelector("#flexCheckChecked");const d={todoTitle:l,desc:i,dueDate:r,priority:c,notes:s,checkList:a.checked?"Done":"Not Done",time:t},u=n;e.updateToDo(d,u)}))},l=()=>{document.querySelector(".form-container").classList.toggle("show-modal")};document.querySelector("#todo-form").addEventListener("submit",(o=>{o.preventDefault();const r=document.querySelector("#title").value,c=document.querySelector("#description").value,s=document.querySelector("#due-date").value,n=document.querySelector("#priority").value,a=document.querySelector("#notes").value,d=document.querySelector("#project").value,u=document.querySelector("#flexCheckChecked");const m=u.checked?"Done":"Not Done";l();const p=new t(d),v={todoTitle:r,desc:c,dueDate:s,priority:n,notes:a,checkList:m,time:(new Date).getTime()};p.todos.push(v),i.addProjects(p),e.addToDo(p,v)}));class i{static urlSlug(e){return e.split(/\W/).filter((e=>""!==e)).join("-").toLowerCase()}static displayProjects(){const t=e.getProjects();i.addAllToDos(t),t.forEach((e=>{i.addProjects(e)})),i.addButton(),i.addRemoveButton(),document.querySelectorAll("#delete-project").forEach((t=>{t.addEventListener("click",(t=>{const o=t.target.parentElement.previousSibling.innerText;i.deletePrTab(t.target),e.removePr(o)}))})),document.querySelectorAll("#edit").forEach((t=>{t.addEventListener("click",(r=>{const c=t.parentElement.parentElement.parentElement.firstChild.nextSibling.firstChild.nextSibling.firstChild.nextSibling.innerText;l(),i.fillFields(c),o(c),i.deletePrTab(r.target),e.removePr(c)}))}))}static addProjects(e){const t=document.querySelector("#v-pills-tab"),o=(e=>{const t=document.createElement("a");return t.setAttribute("class","nav-link"),t.setAttribute("id",`v-pills-${i.urlSlug(e.proTitle)}-tab`),t.setAttribute("data-toggle","pill"),t.setAttribute("href",`#v-pills-${i.urlSlug(e.proTitle)}`),t.setAttribute("role","tab"),t.setAttribute("aria-controls",`v-pills-${i.urlSlug(e.proTitle)}`),t.setAttribute("aria-selected","false"),t})(e),l=(()=>{const e=document.createElement("a");return e.setAttribute("class","d-flex justify-content-center m-1"),e.setAttribute("id","delete-project"),e.innerHTML='\n  <i class="far fa-trash-alt dissapear"></i>\n  ',e})();o.innerText=`${e.proTitle}`,t.appendChild(o),t.appendChild(l);const r=document.querySelector("#v-pills-tabContent"),c=(e=>{const t=document.createElement("div");return t.setAttribute("class","tab-pane fade"),t.setAttribute("id",`v-pills-${i.urlSlug(e.proTitle)}`),t.setAttribute("aria-labelledby",`v-pills-${i.urlSlug(e.proTitle)}`),t.setAttribute("role","tabpanel"),e.todos.forEach((e=>{const o=document.createElement("div");o.setAttribute("class","row border-bottom pb-2 mt-2"),o.innerHTML=`\n      <div class="col-10 row">\n      <div class="col-12 col-md-6 row">\n      <li class="d-none">${e.time}</li>\n      <li class="col">${e.todoTitle}</li>\n      <li class="col">${e.desc}</li>\n      <li class="col">${e.dueDate}</li>\n      </div>\n      <div class="col-12 col-md-6 row">\n      <li class="col">${e.priority}</li>\n      <li class="col">${e.notes}</li>\n      <li class="col">${e.checkList}</li>\n      </div>\n      </div>\n      <div class="col-2 row">\n      <span class="col-6" id="delete"><a href="#" class="btn btn-danger btn-sm delete"><i class="far fa-trash-alt"></i></a></span>\n      <span class="col-6"><a href="#" id="edit" class="btn btn-primary btn-sm ml-1"><i class="far fa-edit"></i></a></span>\n      </div>\n      `,t.appendChild(o)})),t})(e);r.appendChild(c)}static addAllToDos(e){const t=document.querySelector("#v-pills-home");e.forEach((e=>{const o=(e=>{const t=document.createElement("div");return e.todos.forEach((e=>{const o=document.createElement("div");o.setAttribute("class","row border-bottom pb-2 mt-2"),o.innerHTML=`\n      <div class="col-12 col-md-6 row">\n      <li class="d-none">${e.time}</li>\n      <li class="col">${e.todoTitle}</li>\n      <li class="col">${e.desc}</li>\n      <li class="col">${e.dueDate}</li>\n      </div>\n      <div class="col-12 col-md-6 row">\n      <li class="col">${e.priority}</li>\n      <li class="col">${e.notes}</li>\n      <li class="col">${e.checkList}</li>\n      </div>\n      `,t.appendChild(o)})),t})(e);t.appendChild(o)}))}static addButton(){const e=document.querySelector("#v-pills-tabContent"),t=document.createElement("div");t.setAttribute("class","btn btn-light addbtn w-100 bolder text-primary shadow mt-3"),t.innerText="+",t.addEventListener("click",(e=>{e.stopPropagation(),l()})),e.appendChild(t)}static deleteToDo(e){e.parentElement.parentElement.remove()}static deletePrTab(e){e.parentElement.previousSibling.remove(),e.parentElement.remove()}static addRemoveButton(){document.querySelectorAll("#delete").forEach((t=>{t.addEventListener("click",(o=>{o.stopPropagation(),i.deleteToDo(t);const l=t.parentElement.parentElement.firstChild.nextSibling.firstChild.nextSibling.firstChild.nextSibling.innerText;e.removeToDo(l)}))}))}static clearFields(){}static fillFields(t){e.getProjects().forEach((e=>{e.todos.forEach((o=>{if(o.time.to_i===t.to_i){document.querySelector("#title").value=o.todoTitle,document.querySelector("#description").value=o.desc,document.querySelector("#due-date").value=o.dueDate,document.querySelector("#priority").value=o.priority,document.querySelector("#notes").value=o.notes;const t=document.querySelector("#project");t.value=e.proTitle,t.disabled=!0}}))}))}}document.addEventListener("DOMContentLoaded",i.displayProjects);(class{static createTabs(){document.getElementById("content").innerHTML='\n    <div class="row">\n    <div class="col-2">\n      <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">\n        <a class="nav-link mb-3 active border-bottom" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Home</a>\n      </div>\n    </div>\n    <div class="col-10">\n      <div class="tab-content" id="v-pills-tabContent">\n        <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab"></div>\n      </div>\n    </div>\n  </div>\n    '}}).createTabs()})();